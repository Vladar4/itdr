<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Into the Dungeon: Revived</title>

    <meta property="og:type" content="website">
    <meta property="og:site_name" content="Into the Dungeon: Revived">
    <meta property="twitter:card" content="summary">

    <meta name="title" content="Into the Dungeon: Revived | Tools">
    <meta property="og:title" content="Into the Dungeon: Revived | Tools">
    <meta property="twitter:title" content="Into the Dungeon: Revived | Tools">

    <meta name="description" content="ItDR is a lightweight fantasy-themed role-playing ruleset designed for a streamlined gameplay.">
    <meta property="og:description" content="ItDR is a lightweight fantasy-themed role-playing ruleset designed for a streamlined gameplay.">
    <meta property="twitter:description" content="ItDR is a lightweight fantasy-themed role-playing ruleset designed for a streamlined gameplay.">

    <meta property="og:image" content="https://vladar4.github.io/itdr/logo_itdr.png">
    <meta property="twitter:image" content="https://vladar4.github.io/itdr/logo_itdr.png">

    <link rel="stylesheet" type="text/css" href="style.css" media="screen"/>

    <link rel="manifest" href="manifest.webmanifest"/>
    <link rel="icon" href="favicon.ico" sizes="32x32" type="image/x-icon"/>
    <link rel="icon" href="favicon.svg" type="image/svg+xml"/>
    <link rel="apple-touch-icon" href="apple-touch-icon.png"/>
</head>
<body onload="onLoadTab('tools', 'creatures')">
<main>
    <header>
        <h1>Into the Dungeon: Revived</h1>

        <div class="subtitle">Rules for fantastic adventure games<br/>
        playable with paper and pencil and polyhedral dice</div>
        <div class="hr"></div>
        <nav>
            <input type="checkbox" id="nav-check">
            <div class="nav-button"><label for="nav-check"><span></span><span></span><span></span></label></div>
            <div class="nav-left">
                <a href="index.html"><img src="logo_itdr.svg" alt="ItDR" title="ItDR home page"/></a>
            </div>
            <div class="nav-links">
                <a href="index.html">Home</a>
                <a href="downloads.html">Downloads</a>
                <a class="nav-current" href="#">Tools</a>
                <a href="links.html">Links</a>
            </div>
            <div class="nav-right">
                <a href="https://github.com/Vladar4/itdr" target="_blank">
                    <img src="logo_github.svg" alt="GitHub" title="ItDR GitHub page" />
                </a>
                <a href="https://vladar.itch.io/into-the-dungeon-revived" target="_blank">
                    <img src="logo_itchio.svg" alt="itch.io" title="ItDR itch.io page" />
                </a>
                <a href="https://vladar.bearblog.dev/" target="_blank">
                    <img src="logo_blog.svg" alt="Blog" title="Vladar's Blog" />
                </a>
            </div>
        </nav>
        <div class="hr"></div>
        <!--
        <div class="lang">
            ·
            <a class="nav-current" href="#">EN</a>
            ·
            <a href="https://medusa.github.io/itdr-it/tools.html">IT</a>
            ·
        </div>
        -->
    </header>

    <article>
        <noscript><p class="centered" style="color:red">The tools need JavaScript to work properly.</p></noscript>

        <div class="tab-menu">
            <button class="tab-link active" id="btn-creatures" onClick="onOpenTab(event, 'creatures')">Creatures</button>
            <button class="tab-link" id="btn-misc" onClick="onOpenTab(event, 'misc')">Miscellaneous</button>
        </div>

        <!-- TAB 1 -->
        <div class="tab" id="creatures" style="display:block">

        <p class="centered">
            <h2>Random Character</h2>
            <div style="display:none"> <!-- DEBUG TOOLS -->
                <input type="button" id="btn_debugRNG_d6" value="Debug: RNG d6 (console)" style="width:100%" onclick="debugRNG(d6, 1, 6)" />
                <input type="button" id="btn_debugRNG_stat" value="Debug: RNG stat (console)" style="width:100%" onclick="debugRNG(stat, 3, 18)" />
            </div>
            <input type="button" id="btn_RandomCharacter" value="Generate" onclick="generateRandomStats()" />
            <p id="out_RandomStats" class="centered" style="display:none"></p>
            <table class="centered nowrap" id="swap_RandomCharacter" style="display:none; table-layout:fixed"><tr>
                <td style="width:33%"><label for="select_feature">Feature:</label><br/><select name="feature" id="select_feature"></select></td>
                <td style="width:33%"><br/><input type="button" id="btn_RandomCharacterKeep" value="Keep rolls" onclick="generateRandomCharacter(0)" /></td>
                <td style="width:33%"><label for="select_background">Background:</label><br/><select name="background" id="select_background"></select></td>
            </tr><tr>
                <td><input type="button" id="btn_RandomCharacterSD" value="STR &#8644; DEX" onclick="generateRandomCharacter(12)" /></td>
                <td><input type="button" id="btn_RandomCharacterSW" value="STR &#8644; WIL" onclick="generateRandomCharacter(13)" /></td>
                <td><input type="button" id="btn_RandomCharacterSE" value="STR &#8644; Money" onclick="generateRandomCharacter(14)" /></td>
            </tr><tr>
                <td><input type="button" id="btn_RandomCharacterDW" value="DEX &#8644; WIL" onclick="generateRandomCharacter(23)" /></td>
                <td><input type="button" id="btn_RandomCharacterDM" value="DEX &#8644; Money" onclick="generateRandomCharacter(24)" /></td>
                <td><input type="button" id="btn_RandomCharacterWM" value="WIL &#8644; Money" onclick="generateRandomCharacter(34)" /></td>
            </td></tr><tr><td colspan=3>
                <input type="checkbox" id="checkbox_equipment" name="equipment" checked /><label for="checkbox_equipment">Buy random equipment</label>
            </td></tr></table>
            <p id="out_RandomCharacter" style="display:none"></p>
        </p>

        <p class="centered">
            <h2>Random Non-Player Character</h2>
            <input type="button" id="btn_RandomNPC" value="Generate" onclick="generateRandomNPC()" />
            <p id="out_RandomNPC" style="display:none"></p>
        </p>

        <p class="centered">
            <h2>Random Monster</h2>
            <div style="margin-top:1em; margin-bottom:0.5em">
                <div style="display:block; float:left">
                    <input type="checkbox" id="checkbox_monster_abilities" name="monster_abilities" onclick="toggleMonsterAbilities()" /><label for="checkbox_monster_abilities">Generate Abilities</label>
                </div>
                <div id="div_monster_danger" style="display:none; float:right">
                    <label for="select_monster_danger">Danger: </label><select name="monster_danger" id="select_monster_danger" style="padding: 0px; width:6em"></select>
                </div>
            </div>
            <input type="button" id="btn_RandomMonster" value="Generate" onclick="generateRandomMonster()" />
            <p id="out_RandomMonster" style="display:none"></p>
        </p>

        </div> <!-- tab 1 -->

        <!-- TAB 2 -->
        <div class="tab" id="misc">

        <p class="centered">
            <h2>Random Magic Item</h2>
            <input type="button" id="btn_RandomMagicItem" value="Generate" onclick="generateRandomMagicItem()" />
            <p id="out_RandomMagicItem" style="display:none"></p>
        </p>

        <p class="centered">
            <h2>Random Weather</h2>
            <div>
                <div class="inline-block"><input type="radio" id="radio_wind_default" name="radio_wind" value="default" checked /><label for="radio_wind">default</label></div>
                <div class="inline-block"><input type="radio" id="radio_wind_follow" name="radio_wind" value="follow"/><label for="radio_wind">following prevailing winds</label></div>
                <div class="inline-block"><input type="radio" id="radio_wind_against" name="radio_wind" value="against"/><label for="radio_wind">against prevailing winds</label></div>
            </div>
            <table class="centered nowrap" id="table_randomWeather" style="table-layout:fixed; border-spacing:0px"><tr>
                <td style="width:33%; padding:0px"><input type="button" id="btn_RandomWeather" value="Normal Climate" onclick="generateRandomWeather(0)" /></td>
                <td style="width:33%"><input type="button" id="btn_RandomWeatherDry" value="Dry Climate" onclick="generateRandomWeather(1)" /></td>
                <td style="width:33%; padding:0px"><input type="button" id="btn_RandomWeatherRainy" value="Rainy Climate" onclick="generateRandomWeather(2)" /></td>
            </tr></table>
            <p id="out_RandomWeather" style="display:none"></p>
        </p>

        <p class="centered">
            <h2>Horizon and Visibility</h2>
            <p>
                <img    src="horizon.png"
                        alt="Horizon and Visibility"
                        title="Horizon and Visibility"
                />
            </p>
            <div class="centered nowrap flex-container flex-nowrap" style="flex-direction: column">
                <!-- INPUTS -->
                <div class="centered nowrap flex-container flex-nowrap" style="border: 1px solid black; width: 100%; justify-content: center">
                    <!-- COLUMN 1 -->
                    <div class="wrap flex-container" style="flex-direction: column; align-items: flex-end">
                        <div class="flex-item">
                            <label for="horizon_r">Planet radius (R)</label>
                        </div>
                        <div class="flex-item">
                            <label for="horizon_k">Effective radius factor (k)</label>
                        </div>
                        <div class="flex-item">
                            <label for="horizon_h">Observer elevation (h)</label>
                        </div>
                        <div class="flex-item">
                            <label for="horizon_o">Object distance (o)</label>
                        </div>
                        <div class="flex-item">
                            <label>Horizon distance (d)</label>
                        </div>
                        <div class="flex-item">
                            <label>Object height obstructed (x)</label>
                        </div>
                    </div>
                    <!-- COLUMN 2 -->
                    <div class="flex-container" style="flex-direction: column; align-items: flex-start">
                        <div class="flex-item">
                            <input type="number" id="horizon_r" name="Planet radius" min="1" value="3960" style="width: 5em" onchange="calculateHorizon()"/>
                            <label>miles</label>
                        </div>
                        <div class="flex-item">
                            <input type="number" id="horizon_k" name="Effective radius factor" value="1.23" step="0.01" min="0" style="width: 5em" onchange="calculateHorizon()"/>
                            <label>*</label>
                        </div>
                        <div class="flex-item">
                            <input type="number" id="horizon_h" name="Observer elevation" value="6" style="width: 5em" onchange="calculateHorizon()"/>
                            <label>feet</label>
                        </div>
                        <div class="flex-item">
                            <input type="number" id="horizon_o" name="Object distance" value="10" style="width: 5em" onchange="calculateHorizon()"/>
                            <label>miles</label>
                        </div>
                        <div class="flex-item">
                            <input readonly type="number" id="horizon_d" name="Horizon distance" value="0" style="width: 5em; background-color: #f0dcc0"/>
                            <label>miles</label>
                        </div>
                        <div class="flex-item">
                            <input readonly type="number" id="horizon_x" name="Object height obstructed" value="0" style="width: 5em; background-color: #f0dcc0"/>
                            <label>feet</label>
                        </div>
                    </div>
                </div>

                <!-- K-FACTOR TABLE -->
                <div class="spoiler wrap" onclick="spoiler(event, 'k-factor-table')">* Effective radius factor (k) due to refraction (approximate value)</div>
                <div class="flex-container spoiler-hidden" id="k-factor-table" style="flex-direction: column; align-items: flex-start; padding: 8px">
                    <table class="k-table">
                    <thead>
                        <tr>
                            <th style="width: 2em">&#176;C</th>
                            <th style="width: 2em">&#176;F</th>
                            <th style="width: 3em">Arid</th>
                            <th style="width: 3em">Normal</th>
                            <th style="width: 3em">Humid</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                        <td>&minus;40</td><td>&minus;40</td>
                        <td><input type="button" class="narrow" id="btn_K11" value="1.28" onclick="docId('horizon_k').value='1.28'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K12" value="1.32" onclick="docId('horizon_k').value='1.32'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K13" value="1.32" onclick="docId('horizon_k').value='1.32'; calculateHorizon()" /></td>
                        </tr>

                        <tr>
                        <td>&minus;30</td><td>&minus;22</td>
                        <td><input type="button" class="narrow" id="btn_K21" value="1.26" onclick="docId('horizon_k').value='1.26'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K22" value="1.30" onclick="docId('horizon_k').value='1.30'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K23" value="1.30" onclick="docId('horizon_k').value='1.30'; calculateHorizon()" /></td>
                        </tr>
                        <tr>
                        <td>&minus;20</td><td>&minus;4</td>
                        <td><input type="button" class="narrow" id="btn_K31" value="1.24" onclick="docId('horizon_k').value='1.24'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K32" value="1.28" onclick="docId('horizon_k').value='1.28'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K33" value="1.28" onclick="docId('horizon_k').value='1.28'; calculateHorizon()" /></td>
                        </tr>

                        <tr>
                        <td>&minus;10</td><td>14</td>
                        <td><input type="button" class="narrow" id="btn_K41" value="1.22" onclick="docId('horizon_k').value='1.22'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K42" value="1.26" onclick="docId('horizon_k').value='1.26'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K43" value="1.26" onclick="docId('horizon_k').value='1.26'; calculateHorizon()" /></td>
                        </tr>

                        <tr>
                        <td>0</td><td>32</td>
                        <td><input type="button" class="narrow" id="btn_K51" value="1.20" onclick="docId('horizon_k').value='1.20'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K52" value="1.24" onclick="docId('horizon_k').value='1.24'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K53" value="1.25" onclick="docId('horizon_k').value='1.25'; calculateHorizon()" /></td>
                        </tr>

                        <tr>
                        <td>10</td><td>50</td>
                        <td><input type="button" class="narrow" id="btn_K61" value="1.18" onclick="docId('horizon_k').value='1.18'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K62" value="1.23" onclick="docId('horizon_k').value='1.23'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K63" value="1.24" onclick="docId('horizon_k').value='1.24'; calculateHorizon()" /></td>
                        </tr>

                        <tr>
                        <td>20</td><td>68</td>
                        <td><input type="button" class="narrow" id="btn_K71" value="1.17" onclick="docId('horizon_k').value='1.17'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K72" value="1.23" onclick="docId('horizon_k').value='1.23'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K73" value="1.25" onclick="docId('horizon_k').value='1.25'; calculateHorizon()" /></td>
                        </tr>

                        <tr>
                        <td>30</td><td>86</td>
                        <td><input type="button" class="narrow" id="btn_K81" value="1.17" onclick="docId('horizon_k').value='1.17'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K82" value="1.23" onclick="docId('horizon_k').value='1.23'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K83" value="1.27" onclick="docId('horizon_k').value='1.27'; calculateHorizon()" /></td>
                        </tr>

                        <tr>
                        <td>40</td><td>104</td>
                        <td><input type="button" class="narrow" id="btn_K91" value="1.16" onclick="docId('horizon_k').value='1.16'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K92" value="1.25" onclick="docId('horizon_k').value='1.25'; calculateHorizon()" /></td>
                        <td><input type="button" class="narrow" id="btn_K93" value="1.31" onclick="docId('horizon_k').value='1.31'; calculateHorizon()" /></td>
                        </tr>
                    </tbody>
                    </table>
                </div>
            </div>

            <div class="centered nowrap flex-container" style="align-items: flex-start;">
                <div class="flex-container" style="flex-direction: column; gap: 1ex; width: 60%">
                    <div class="flex-item formula">
                        <img    src="horizon_formula0.svg"
                                alt="R' = R * k"
                                title="Formula: effective radius"
                        />
                    </div>
                    <div class="flex-item formula">
                        <img    src="horizon_formula1.svg"
                                alt="d = sqrt(2 * h * R')"
                                title="Formula: horizon distance"
                        />
                    </div>
                    <div class="flex-item formula">
                        <img    src="horizon_formula2.svg"
                                alt="x = sqrt((o - d)^2 + R'^2) - R'"
                                title="Formula: object height obstructed"
                        />
                    </div>
                </div>
                <div class="flex-item" style="flex-shrink: 0; text-align: left">
                    <em>
                        R&prime; &mdash; effective radius<br/>
                        R &mdash; planet radius<br/>
                        k &mdash; effective radius factor<br/>
                        d &mdash; horizon distance<br/>
                        h &mdash; observer elevation<br/>
                        x &mdash; object height obstructed<br/>
                        o &mdash; object distance<br/>
                        (1 mile = 5280 feet)
                    </em>
                </div>
            </div>

            <h3>Simplified for Earth-sized planet (R&nbsp;=&nbsp;3960 miles)</h3>
            <div class="centered nowrap flex-container" style="align-items: flex-start;">
                <div class="flex-container" style="flex-direction: column; gap: 1ex; width: auto">
                    <div class="flex-item">
                        <img    src="horizon_formula3.svg"
                                alt="d = sqrt(1.5 * h * k)"
                                title="Simplified formula: horizon distance"
                        />
                    </div>
                    <div class="flex-item">
                        <img    src="horizon_formula4.svg"
                                alt="x = (d - o)^2 / 1.5 * k"
                                title="Simplified formula: object height obstructed"
                        />
                    </div>
                </div>
                <div class="flex-item" style="flex-shrink: 0; text-align: left">
                    <em>
                        d &mdash; horizon distance, miles<br/>
                        k &mdash; effective radius factor<br/>
                        h &mdash; observer elevation, feet<br/>
                        x &mdash; object height obstructed, feet<br/>
                        o &mdash; object distance, miles<br/>
                    </em>
                </div>
            </div>
        </p>

        </div> <!-- tab 2 -->

        <span class="bottom"><img src="bottom_tools.png"/></span>
    </article>

    <footer>
        <!--
        <div class="hr"></div>
        -->
    </footer>

    <script src="utils.js"></script>
    <script src="random.js"></script>
    <script src="tools.js"></script>
</main>
</body>
</html>

